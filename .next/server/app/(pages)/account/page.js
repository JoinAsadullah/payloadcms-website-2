(()=>{var e={};e.id=2524,e.ids=[2524],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3763:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>u,routeModule:()=>h,tree:()=>d});var r=t(3137),a=t(4647),o=t(4183),n=t.n(o),c=t(1775),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(s,i);let l=r.AppPageRouteModule,d=["",{children:["(pages)",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2817)),"C:\\Users\\masdu\\Desktop\\newproject\\src\\app\\(pages)\\account\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(t.bind(t,5653)),"C:\\Users\\masdu\\Desktop\\newproject\\src\\app\\(pages)\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3719)),"C:\\Users\\masdu\\Desktop\\newproject\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,1918,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\masdu\\Desktop\\newproject\\src\\app\\(pages)\\account\\page.tsx"],m="/(pages)/account/page",p={require:t,loadChunk:()=>Promise.resolve()},h=new l({definition:{kind:a.x.APP_PAGE,page:"/(pages)/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5740:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,1297,23)),Promise.resolve().then(t.t.bind(t,2796,23)),Promise.resolve().then(t.bind(t,9496)),Promise.resolve().then(t.bind(t,3264)),Promise.resolve().then(t.bind(t,1821))},1821:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(80),a=t(9885),o=t(6558),n=t(7114),c=t(9496),i=t(2672),l=t(2655),d=t(8693),u=t(9117),m=t.n(u);let p=()=>{let[e,s]=(0,a.useState)(""),[t,u]=(0,a.useState)(""),{user:p,setUser:h}=(0,d.a)(),[x,g]=(0,a.useState)(!1),{register:j,handleSubmit:_,formState:{errors:b,isLoading:f},reset:y,watch:w}=(0,o.cI)(),v=(0,a.useRef)({});v.current=w("password","");let P=(0,n.useRouter)(),C=(0,a.useCallback)(async e=>{if(p){let t=await fetch(`http://localhost:3000/api/users/${p.id}`,{credentials:"include",method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();h(e.doc),u("Successfully updated account."),s(""),g(!1),y({email:e.doc.email,name:e.doc.name,password:"",passwordConfirm:""})}else s("There was a problem updating your account.")}},[p,h,y]);return(0,a.useEffect)(()=>{null===p&&P.push(`/login?error=${encodeURIComponent("You must be logged in to view this page.")}&redirect=${encodeURIComponent("/account")}`),p&&y({email:p.email,name:p.name,password:"",passwordConfirm:""})},[p,P,y,x]),(0,r.jsxs)("form",{onSubmit:_(C),className:m().form,children:[r.jsx(l.v,{error:e,success:t,className:m().message}),x?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("p",{children:["Change your password below, or ",r.jsx("button",{type:"button",className:m().changePassword,onClick:()=>g(!x),children:"cancel"}),"."]}),r.jsx(i.I,{name:"password",type:"password",label:"Password",required:!0,register:j,error:b.password}),r.jsx(i.I,{name:"passwordConfirm",type:"password",label:"Confirm Password",required:!0,register:j,validate:e=>e===v.current||"The passwords do not match",error:b.passwordConfirm})]}):(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("p",{children:["Change your account details below, or ",r.jsx("button",{type:"button",className:m().changePassword,onClick:()=>g(!x),children:"click here"})," to change your password."]}),r.jsx(i.I,{name:"email",label:"Email Address",required:!0,register:j,error:b.email,type:"email"}),r.jsx(i.I,{name:"name",label:"Name",register:j,error:b.name})]}),r.jsx(c.Button,{type:"submit",label:f?"Processing":x?"Change Password":"Update Account",disabled:f,appearance:"primary",className:m().submit})]})}},9117:e=>{e.exports={form:"AccountForm_form__lSVWE",changePassword:"AccountForm_changePassword__92rDX",submit:"AccountForm_submit__sVozx"},e.exports.__checksum="c6acafd35efe"},9472:e=>{e.exports={account:"account_account__B33_e",params:"account_params__ICrtr",column:"account_column__JAHeq",comment:"account_comment___3zB2",meta:"account_meta__9IH4q"},e.exports.__checksum="6deb46318c3d"},9593:e=>{e.exports={hr:"HR_hr__KdVl9"},e.exports.__checksum="6f3e37085b8c"},967:e=>{e.exports={},e.exports.__checksum="73ff4aef96d0"},2817:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C,metadata:()=>k});var r=t(8144),a=t(3830),o=t(4602),n=t.n(o),c=t(6825),i=t(600),l=t(3205),d=t(9593),u=t.n(d);let m=e=>{let{className:s}=e;return r.jsx("hr",{className:[s,u().hr].filter(Boolean).join(" ")})};var p=t(7979),h=t(5509),x=t(6993),g=t(1978),j=t(2208),_=t(7536);let b=(0,_.createProxy)(String.raw`C:\Users\masdu\Desktop\newproject\src\app\(pages)\account\AccountForm\index.tsx`),{__esModule:f,$$typeof:y}=b,w=b.default;var v=t(9472),P=t.n(v);async function C(){let{user:e}=await (0,g.S)({nullUserRedirect:`/login?error=${encodeURIComponent("You must be logged in to access your account.")}&redirect=${encodeURIComponent("/account")}`}),s=await (0,c.t)({user:e?.id});return(0,r.jsxs)(a.Fragment,{children:[r.jsx(l.T,{children:r.jsx(p.n,{className:P().params})}),r.jsx(h.R,{type:"lowImpact",media:null,richText:[{type:"h1",children:[{text:"Account"}]},{type:"paragraph",children:[{text:"This is your account dashboard. Here you can update your account information, view your comment history, and more. To manage all users, "},{type:"link",url:"/admin/collections/users",children:[{text:"login to the admin dashboard."}]}]}]}),(0,r.jsxs)(l.T,{className:P().account,children:[r.jsx(w,{}),r.jsx(m,{}),r.jsx("h2",{children:"Comments"}),r.jsx("p",{children:"These are the comments you have placed over time. Each comment is associated with a specific post. All comments must be approved by an admin before they appear on the site."}),r.jsx(m,{}),s?.length===0&&r.jsx("p",{children:"You have not made any comments yet."}),s.length>0&&s?.map((e,t)=>{let{doc:o,comment:c,createdAt:i}=e;return c?r.jsxs(a.Fragment,{children:[r.jsxs("div",{className:P().column,children:[r.jsxs("p",{className:P().comment,children:['"',c,'"']}),r.jsxs("p",{className:P().meta,children:["Posted ",o&&"object"==typeof o&&r.jsxs(a.Fragment,{children:[" to ",r.jsx(n(),{href:`/posts/${o?.slug}`,children:o?.title||"Untitled Post"})]}),i&&` on ${x.o(i)}`]})]}),t<s.length-1&&r.jsx(m,{})]},t):null}),r.jsx(m,{}),r.jsx(i.z,{href:"/logout",appearance:"secondary",label:"Log out"})]})]})}let k={title:"Account",description:"Create an account or log in to your existing account.",openGraph:(0,j.T)({title:"Account",url:"/account"})}},5509:(e,s,t)=>{"use strict";t.d(s,{R:()=>l});var r=t(8144);t(3830);var a=t(3205),o=t(702),n=t(864),c=t(967),i=t.n(c);let l=({richText:e})=>r.jsx(a.T,{className:i().lowImpactHero,children:r.jsx("div",{className:i().content,children:r.jsx(n.G,{children:r.jsx(o.Z,{className:i().richText,content:e})})})})}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4650,2560,345,3497,5094,6558,9859,6465,6420,7507,702,484,571,3435],()=>t(3763));module.exports=r})();